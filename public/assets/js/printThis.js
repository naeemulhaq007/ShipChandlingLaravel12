!function(f){function m(e,t){t&&e.append(t.jquery?t.clone():t)}function h(e,t,n){var i,a,o,r=t.clone(n.formValues);n.formValues&&(i=r,a="select, textarea",o=t.find(a),i.find(a).each(function(e,t){f(t).val(o.eq(e).val())})),n.removeScripts&&r.find("script").remove(),n.printContainer?r.appendTo(e):r.each(function(){f(this).children().appendTo(e)})}var u;f.fn.printThis=function(e){u=f.extend({},f.fn.printThis.defaults,e);var t,l=this instanceof jQuery?this:f(this),n="printThis-"+(new Date).getTime();window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)?(t='javascript:document.write("<head><script>document.domain=\\"'+document.domain+'\\";<\/script></head><body></body>")',(e=document.createElement("iframe")).name="printIframe",e.id=n,e.className="MSIE",document.body.appendChild(e),e.src=t):f("<iframe id='"+n+"' name='printIframe' />").appendTo("body");var p=f("#"+n);u.debug||p.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"}),"function"==typeof u.beforePrint&&u.beforePrint(),setTimeout(function(){var e,t;u.doctypeString&&(e=p,t=u.doctypeString,(e=(e=(e=e.get(0)).contentWindow||e.contentDocument||e).document||e.contentDocument||e).open(),e.write(t),e.close());var n=p.contents(),i=n.find("head"),a=n.find("body"),o=f("base"),r=!0===u.base&&0<o.length?o.attr("href"):"string"==typeof u.base?u.base:document.location.protocol+"//"+document.location.host;i.append('<base href="'+r+'">'),u.importCSS&&f("link[rel=stylesheet]").each(function(){var e,t=f(this).attr("href");t&&(e=f(this).attr("media")||"all",i.append("<link type='text/css' rel='stylesheet' href='"+t+"' media='"+e+"'>"))}),u.importStyle&&f("style").each(function(){i.append(this.outerHTML)}),u.pageTitle&&i.append("<title>"+u.pageTitle+"</title>"),u.loadCSS&&(f.isArray(u.loadCSS)?jQuery.each(u.loadCSS,function(e,t){i.append("<link type='text/css' rel='stylesheet' href='"+this+"'>")}):i.append("<link type='text/css' rel='stylesheet' href='"+u.loadCSS+"'>"));o=f("html")[0];n.find("html").prop("style",o.style.cssText);var s,c,d,r=u.copyTagClasses;r&&(-1!==(r=!0===r?"bh":r).indexOf("b")&&a.addClass(f("body")[0].className),-1!==r.indexOf("h")&&n.find("html").addClass(o.className)),(r=u.copyTagStyles)&&(-1!==(r=!0===r?"bh":r).indexOf("b")&&a.attr("style",f("body")[0].style.cssText),-1!==r.indexOf("h")&&n.find("html").attr("style",o.style.cssText)),m(a,u.header),u.canvas&&(s=0,l.find("canvas").addBack("canvas").each(function(){f(this).attr("data-printthis",s++)})),h(a,l,u),u.canvas&&a.find("canvas").each(function(){var e=f(this).data("printthis"),e=f('[data-printthis="'+e+'"]');this.getContext("2d").drawImage(e[0],0,0),f.isFunction(f.fn.removeAttr)?e.removeAttr("data-printthis"):f.each(e,function(e,t){t.removeAttribute("data-printthis")})}),u.removeInline&&(o=u.removeInlineSelector||"*",f.isFunction(f.removeAttr)?a.find(o).removeAttr("style"):a.find(o).attr("style","")),m(a,u.footer),c=p,d=u.beforePrintEvent,c=(c=c.get(0)).contentWindow||c.contentDocument||c,"function"==typeof d&&("matchMedia"in c?c.matchMedia("print").addListener(function(e){e.matches&&d()}):c.onbeforeprint=d),setTimeout(function(){p.hasClass("MSIE")?(window.frames.printIframe.focus(),i.append("<script>  window.print(); <\/script>")):document.queryCommandSupported("print")?p[0].contentWindow.document.execCommand("print",!1,null):(p[0].contentWindow.focus(),p[0].contentWindow.print()),u.debug||setTimeout(function(){p.remove()},1e3),"function"==typeof u.afterPrint&&u.afterPrint()},u.printDelay)},333)},f.fn.printThis.defaults={debug:!1,importCSS:!0,importStyle:!0,printContainer:!0,loadCSS:"",pageTitle:"",removeInline:!1,removeInlineSelector:"*",printDelay:1e3,header:null,footer:null,base:!1,formValues:!0,canvas:!0,doctypeString:"<!DOCTYPE html>",removeScripts:!1,copyTagClasses:!0,copyTagStyles:!0,beforePrintEvent:null,beforePrint:null,afterPrint:null}}(jQuery);
